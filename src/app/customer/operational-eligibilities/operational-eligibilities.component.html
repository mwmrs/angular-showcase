<div [formGroup]="form">
  <h3>Operational Eligibilities</h3>

  <mat-card formGroupName="values">
    <div *ngFor="let option of eligibilityOptions">
      <mat-checkbox [formControlName]="option">{{option | titlecase}}</mat-checkbox>
    </div>
  </mat-card>

  <mat-card formGroupName="details">
    <h4>Eligibility Details</h4>
    <div *ngFor="let option of eligibilityOptions">
      <mat-card [formGroupName]="option" [class.disabled-card]="!form.get('values')?.get(option)?.value">
        <span>{{option | titlecase}}</span>
        <div style="display: flex; gap: 16px;">
          <mat-form-field>
            <mat-label>Start Date</mat-label>
            <input matInput [matDatepicker]="startPicker" formControlName="start_date">
            <mat-datepicker-toggle matSuffix [for]="startPicker"></mat-datepicker-toggle>
            <mat-datepicker #startPicker></mat-datepicker>
          </mat-form-field>
          <mat-form-field>
            <mat-label>End Date</mat-label>
            <input matInput [matDatepicker]="endPicker" formControlName="end_date">
            <mat-datepicker-toggle matSuffix [for]="endPicker"></mat-datepicker-toggle>
            <mat-datepicker #endPicker></mat-datepicker>
          </mat-form-field>
          <mat-form-field>
            <mat-label>Measure</mat-label>
            <mat-select formControlName="measure">
              <mat-option *ngFor="let measureOption of measureOptions" [value]="measureOption">
                {{measureOption | titlecase}}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </div>
      </mat-card>
    </div>
  </mat-card>
</div>
